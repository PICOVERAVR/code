#include <xc.h>
#include "pin_manager.h"

void PIN_MANAGER_Initialize(void) {
    /****************************************************************************
     * Setting the Output Latch SFR(s)
     ***************************************************************************/
    LATA = 0x0000;
    LATB = 0x34E0;

    /****************************************************************************
     * Setting the GPIO Direction SFR(s)
     ***************************************************************************/
    TRISA = 0x000F;
    TRISB = 0xF31F;

    /****************************************************************************
     * Setting the Weak Pull Up and Weak Pull Down SFR(s)
     ***************************************************************************/
    CNPDA = 0x0000;
    CNPDB = 0x0000;
    CNPUA = 0x0000;
    CNPUB = 0x0000;

    /****************************************************************************
     * Setting the Open Drain SFR(s)
     ***************************************************************************/
    ODCA = 0x0000;
    ODCB = 0x0000;

    /****************************************************************************
     * Setting the Analog/Digital Configuration SFR(s)
     ***************************************************************************/
    ANSELA = 0x0013;
    ANSELB = 0x010C;

    /****************************************************************************
     * Set the PPS
     ***************************************************************************/
    __builtin_write_OSCCONL(OSCCON & 0xbf); // unlock PPS

    RPINR22bits.SDI2R = 0x002C;   //RB12->SPI2:SDI2;
    RPOR0bits.RP20R = 0x0001;   //RA4->UART1:U1TX;
    RPOR2bits.RP39R = 0x0008;   //RB7->SPI2:SDO2;
    RPOR4bits.RP43R = 0x0009;   //RB11->SPI2:SCK2OUT;
    RPINR18bits.U1RXR = 0x0024;   //RB4->UART1:U1RX;

    __builtin_write_OSCCONL(OSCCON | 0x40); // lock   PPS

}

